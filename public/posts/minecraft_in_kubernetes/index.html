<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How I launched minecraft in kubernetes | OldTyT</title>
<meta name="keywords" content="kubernetes, minecraft, skills">
<meta name="description" content="Minecraft in kubernetes.">
<meta name="author" content="OldTyT">
<link rel="canonical" href="https://oldtyt.xyz/posts/minecraft_in_kubernetes/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css" integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO&#43;tN6uT1w=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://upload.wikimedia.org/wikipedia/en/9/9a/Trollface_non-free.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://oldtyt.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://oldtyt.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://oldtyt.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://oldtyt.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
 
    ym(93497051, "init", {
         clickmap:true,
         trackLinks:true,
         accurateTrackBounce:true
    });
 </script>
 <noscript><div><img src="https://mc.yandex.ru/watch/93497051" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
 
 
 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2Q1PY6PFPY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2Q1PY6PFPY');
</script>
<meta property="og:title" content="How I launched minecraft in kubernetes" />
<meta property="og:description" content="Minecraft in kubernetes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://oldtyt.xyz/posts/minecraft_in_kubernetes/" /><meta property="og:image" content="https://oldtyt.xyz/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-06-05T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://oldtyt.xyz/papermod-cover.png"/>

<meta name="twitter:title" content="How I launched minecraft in kubernetes"/>
<meta name="twitter:description" content="Minecraft in kubernetes."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://oldtyt.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How I launched minecraft in kubernetes",
      "item": "https://oldtyt.xyz/posts/minecraft_in_kubernetes/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How I launched minecraft in kubernetes",
  "name": "How I launched minecraft in kubernetes",
  "description": "Minecraft in kubernetes.",
  "keywords": [
    "kubernetes", "minecraft", "skills"
  ],
  "articleBody": "Minecraft in kubernetes Hello everyone, in this article I will share with you my experience in launching minecraft in kubernetes.\nThe main problem that arises when trying to launch minecraft in kubernetes is that while minecraft is running, files are being worked on on the local disk, and this approach in kubernetes is anti-pathetic, since in case of failure of the node (let’s call it node A) on which the pod was deployed - pod will not be able to be created on another node (node B), since it is known that pod previously worked on node A and, accordingly, all its permanent files are there.\nOptions for solving problems with the use of permanent files While searching for a solution to this problem, I identified the following solutions for myself:\n rejection of permanent files use native Persistent Volume create a network drive use csi-s3  Let’s take a closer look at each of the options\nAbandoning permanent files Positive:\n The best solution for applications in kubernetes  Minuses:\n Not applicable to the current application  Use Native Persistent Volume Positive:\n High speed of reading/writing files  Minuses:\n All data is on the same node, in case of its breakdown, the pod will not be able to rise  Create a network drive Positive:\n The data is replicated to multiple nodes  Minuses:\n Low file read/write speed  Use csi-s3 Positive:\n The data was taken out from the cluster  Minuses:\n Low file read/write speed An extremely high price may come out due to the large number of API calls  Analysis of options Based on the data obtained, we come to the conclusion that at the moment, there is no solution that could meet our requirements, namely:\n high speed of reading / writing files there must be no binding to a specific node it should be done as budget-friendly as possible  Solving the problem using persistent data To solve this problem, was prepared docker container.\nThe algorithm of the container  SSH keys are being added. The keys are taken from the values of the ENV variables. The repository is cloned from github with the server configuration to the directory - /app The sequences MYSQL_.+ are replaced in all files in /app/plugins by their value. The game world is being copied from s3 storage and unpacked Game plugins and kernel are being copied from s3 storage Starts /task_manager.py  - which is responsible for the execution of cron tasks, the operation of the server and the output of syslog  Cron tasks In cron tasks, the following tasks are currently configured:\n* * * * * root /git_pull.sh | logger * * * * * root /git_commit.sh | logger 0 * * * * root /copy_worlds.sh | logger Learn more about each task:\n /git_pull.sh - executes git pull in the /app directory /git_commit.sh  - creates a commit and pushes it to the repository /copy_worlds.sh - makes a copy of the world and uploads it to s3 storage in place of the existing one  Example of service deployment Setting up the ingress controller Consider the example of traffic'. To configure the ingress` controller, you will need to run the following command:\n$ helm upgrade --values traefik-values.yaml traefik traefik/traefik -n kube-system Contents of the traefik-values.yaml file:\nports:traefik:port:9000expose:falseexposedPort:9000protocol:TCPweb:port:8000expose:trueexposedPort:80protocol:TCPminecraft:port:22565expose:trueexposedPort:25565protocol:TCPwebsecure:port:8443expose:trueexposedPort:443protocol:TCPhttp3:enabled:falsetls:enabled:trueoptions:\"\"certResolver:\"\"domains:[]middlewares:[]metrics:port:9100expose:falseexposedPort:9100protocol:TCPAfter that, connections to LoadBalancer will be allowed on port 25565:\n$ kubectl get svc -n kube-system | grep -v \"none\" NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE traefik LoadBalancer 10.43.2.50 100.10.0.11 25565:30224/TCP,80:31380/TCP,443:30226/TCP 2d21h Deploy Example of the final manifest that contains the required configuration:\n---apiVersion:v1kind:Namespacemetadata:name:minecraft---apiVersion:v1kind:Secretmetadata:name:minecraft-secretnamespace:minecrafttype:Opaquedata:SSH_KEY_PUBLIC:\"SECRET\"SSH_KEY_PRIVATE:\"SECRET\"MYSQL_ROOT_PASSWORD:\"SECRET\"MYSQL_DBS:\"SECRET\"MYSQL_HOST:\"SECRET\"MYSQL_USER:\"SECRET\"MYSQL_PASSWORD:\"SECRET\"S3_BUCKET:\"SECRET\"S3_ACCESS_KEY:\"SECRET\"S3_ACCESS_KEY_ID:\"SECRET\"---apiVersion:apps/v1kind:Deploymentmetadata:name:some_worlds_namenamespace:minecraftspec:selector:matchLabels:app:some_worlds_namestrategy:type:Recreatetemplate:metadata:namespace:minecraftlabels:app:some_worlds_namespec:imagePullSecrets:- name:github-registrycontainers:- image:ghcr.io/oldtyt/docker_minecraftimagePullPolicy:Alwaysname:some_worlds_nameresources:requests:cpu:1000mmemory:5Glimits:memory:6Gcpu:1200menv:- name:XMXvalue:\"5G\"- name:\"XMS\"value:\"512M\"- name:MYSQL_HOSTvalueFrom:secretKeyRef:name:minecraft-secretkey:MYSQL_HOST- name:MYSQL_USERvalueFrom:secretKeyRef:name:minecraft-secretkey:MYSQL_USER- name:MYSQL_DBvalueFrom:secretKeyRef:name:minecraft-secretkey:MYSQL_USER- name:MYSQL_PASSWORDvalueFrom:secretKeyRef:name:minecraft-secretkey:MYSQL_PASSWORD- name:S3_BUCKETvalueFrom:secretKeyRef:name:minecraft-secretkey:S3_BUCKET- name:S3_ACCESS_KEYvalueFrom:secretKeyRef:name:minecraft-secretkey:S3_ACCESS_KEY- name:S3_ACCESS_KEY_IDvalueFrom:secretKeyRef:name:minecraft-secretkey:S3_ACCESS_KEY_ID- name:SSH_KEY_PRIVATEvalueFrom:secretKeyRef:name:minecraft-secretkey:SSH_KEY_PRIVATE- name:SSH_KEY_PUBLICvalueFrom:secretKeyRef:name:minecraft-secretkey:SSH_KEY_PUBLIC- name:PLUGINS_LISTvalue:\"some,plugins,list\"- name:GIT_REPOvalue:\"git@github.com:USER/REPO.git\"- name:KERNELvalue:\"KERNEL\"- name:\"WORLDS\"value:\"some_worlds_name\"---apiVersion:v1kind:Servicemetadata:name:some_worlds_namenamespace:minecraftlabels:env:prodapp:some_worlds_nameowner:OldTyTspec:ports:- name:minecrafttargetPort:25565port:25565protocol:TCPselector:app:some_worlds_nameThe command to deploy the manifest:\n$ kubectl apply -f minecraft.yaml ",
  "wordCount" : "606",
  "inLanguage": "en",
  "datePublished": "2023-06-05T00:00:00Z",
  "dateModified": "2023-06-05T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "OldTyT"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://oldtyt.xyz/posts/minecraft_in_kubernetes/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "OldTyT",
    "logo": {
      "@type": "ImageObject",
      "url": "https://upload.wikimedia.org/wikipedia/en/9/9a/Trollface_non-free.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://oldtyt.xyz/" accesskey="h" title="OldTyT (Alt + H)">OldTyT</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://oldtyt.xyz/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://oldtyt.xyz/posts" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://oldtyt.xyz/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://oldtyt.xyz/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://oldtyt.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://oldtyt.xyz/posts/">Posts</a></div>
    <h1 class="post-title">
      How I launched minecraft in kubernetes
    </h1>
    <div class="post-description">
      Minecraft in kubernetes.
    </div>
    <div class="post-meta"><span title='2023-06-05 00:00:00 +0000 UTC'>June 5, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;OldTyT&nbsp;|&nbsp;<a href="https://github.com/OldTyT/oldtyt.xyz/blob/master/content/posts/minecraft_in_kubernetes.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#minecraft-in-kubernetes" aria-label="Minecraft in kubernetes">Minecraft in kubernetes</a><ul>
                        
                <li>
                    <a href="#options-for-solving-problems-with-the-use-of-permanent-files" aria-label="Options for solving problems with the use of permanent files">Options for solving problems with the use of permanent files</a><ul>
                        
                <li>
                    <a href="#abandoning-permanent-files" aria-label="Abandoning permanent files">Abandoning permanent files</a></li>
                <li>
                    <a href="#use-native-persistent-volume" aria-label="Use Native Persistent Volume">Use Native Persistent Volume</a></li>
                <li>
                    <a href="#create-a-network-drive" aria-label="Create a network drive">Create a network drive</a></li>
                <li>
                    <a href="#use-csi-s3" aria-label="Use csi-s3">Use csi-s3</a></li></ul>
                </li>
                <li>
                    <a href="#analysis-of-options" aria-label="Analysis of options">Analysis of options</a></li>
                <li>
                    <a href="#solving-the-problem-using-persistent-data" aria-label="Solving the problem using persistent data">Solving the problem using persistent data</a><ul>
                        
                <li>
                    <a href="#the-algorithm-of-the-container" aria-label="The algorithm of the container">The algorithm of the container</a><ul>
                        
                <li>
                    <a href="#cron-tasks" aria-label="Cron tasks">Cron tasks</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#example-of-service-deployment" aria-label="Example of service deployment">Example of service deployment</a><ul>
                        
                <li>
                    <a href="#setting-up-the-ingress-controller" aria-label="Setting up the ingress controller">Setting up the <code>ingress</code> controller</a></li>
                <li>
                    <a href="#deploy" aria-label="Deploy">Deploy</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="minecraft-in-kubernetes">Minecraft in kubernetes<a hidden class="anchor" aria-hidden="true" href="#minecraft-in-kubernetes">#</a></h1>
<p>Hello everyone, in this article I will share with you my experience in launching minecraft in kubernetes.</p>
<p>The main problem that arises when trying to launch minecraft in kubernetes is that while minecraft is running, files are being worked on on the local disk, and this approach in kubernetes is anti-pathetic, since in case of failure of the node (let&rsquo;s call it node A) on which the pod was deployed - pod will not be able to be created on another node (node B), since it is known that pod previously worked on node A and, accordingly, all its permanent files are there.</p>
<h2 id="options-for-solving-problems-with-the-use-of-permanent-files">Options for solving problems with the use of permanent files<a hidden class="anchor" aria-hidden="true" href="#options-for-solving-problems-with-the-use-of-permanent-files">#</a></h2>
<p>While searching for a solution to this problem, I identified the following solutions for myself:</p>
<ul>
<li>rejection of permanent files</li>
<li>use native Persistent Volume</li>
<li>create a network drive</li>
<li>use <a href="https://cloud.yandex.com/en/docs/managed-kubernetes/operations/volumes/s3-csi-integration">csi-s3</a></li>
</ul>
<p>Let&rsquo;s take a closer look at each of the options</p>
<h3 id="abandoning-permanent-files">Abandoning permanent files<a hidden class="anchor" aria-hidden="true" href="#abandoning-permanent-files">#</a></h3>
<p>Positive:</p>
<ul>
<li>The best solution for applications in kubernetes</li>
</ul>
<p>Minuses:</p>
<ul>
<li>Not applicable to the current application</li>
</ul>
<h3 id="use-native-persistent-volume">Use Native Persistent Volume<a hidden class="anchor" aria-hidden="true" href="#use-native-persistent-volume">#</a></h3>
<p>Positive:</p>
<ul>
<li>High speed of reading/writing files</li>
</ul>
<p>Minuses:</p>
<ul>
<li>All data is on the same node, in case of its breakdown, the pod will not be able to rise</li>
</ul>
<h3 id="create-a-network-drive">Create a network drive<a hidden class="anchor" aria-hidden="true" href="#create-a-network-drive">#</a></h3>
<p>Positive:</p>
<ul>
<li>The data is replicated to multiple nodes</li>
</ul>
<p>Minuses:</p>
<ul>
<li>Low file read/write speed</li>
</ul>
<h3 id="use-csi-s3">Use csi-s3<a hidden class="anchor" aria-hidden="true" href="#use-csi-s3">#</a></h3>
<p>Positive:</p>
<ul>
<li>The data was taken out from the cluster</li>
</ul>
<p>Minuses:</p>
<ul>
<li>Low file read/write speed</li>
<li>An extremely high price may come out due to the large number of API calls</li>
</ul>
<h2 id="analysis-of-options">Analysis of options<a hidden class="anchor" aria-hidden="true" href="#analysis-of-options">#</a></h2>
<p>Based on the data obtained, we come to the conclusion that at the moment, there is no solution that could meet our requirements, namely:</p>
<ul>
<li>high speed of reading / writing files</li>
<li>there must be no binding to a specific node</li>
<li>it should be done as budget-friendly as possible</li>
</ul>
<h2 id="solving-the-problem-using-persistent-data">Solving the problem using persistent data<a hidden class="anchor" aria-hidden="true" href="#solving-the-problem-using-persistent-data">#</a></h2>
<p>To solve this problem, was prepared <a href="https://github.com/OldTyT/docker_minecraft">docker container</a>.</p>
<h3 id="the-algorithm-of-the-container">The algorithm of the container<a hidden class="anchor" aria-hidden="true" href="#the-algorithm-of-the-container">#</a></h3>
<ol>
<li>SSH keys are being added. The keys are taken from the values of the ENV variables.</li>
<li>The repository is cloned from github with the server configuration to the directory - <code>/app</code></li>
<li>The sequences <code>MYSQL_.+</code> are replaced in all files in <code>/app/plugins</code> by their value.</li>
<li>The game world is being copied from s3 storage and unpacked</li>
<li>Game plugins and kernel are being copied from s3 storage</li>
<li>Starts <code>/task_manager.py </code> - which is responsible for the execution of <code>cron</code> tasks, the operation of the server and the output of <code>syslog</code></li>
</ol>
<h4 id="cron-tasks">Cron tasks<a hidden class="anchor" aria-hidden="true" href="#cron-tasks">#</a></h4>
<p>In cron tasks, the following tasks are currently configured:</p>
<pre tabindex="0"><code>* * * * * root /git_pull.sh | logger
* * * * * root /git_commit.sh | logger
0 * * * * root /copy_worlds.sh | logger
</code></pre><p>Learn more about each task:</p>
<ul>
<li><code>/git_pull.sh</code> - executes <code>git pull</code> in the <code>/app</code> directory</li>
<li><code>/git_commit.sh </code> - creates a commit and pushes it to the repository</li>
<li><code>/copy_worlds.sh</code> - makes a copy of the world and uploads it to s3 storage in place of the existing one</li>
</ul>
<h2 id="example-of-service-deployment">Example of service deployment<a hidden class="anchor" aria-hidden="true" href="#example-of-service-deployment">#</a></h2>
<h3 id="setting-up-the-ingress-controller">Setting up the <code>ingress</code> controller<a hidden class="anchor" aria-hidden="true" href="#setting-up-the-ingress-controller">#</a></h3>
<p>Consider the example of <code>traffic'. To configure the </code>ingress` controller, you will need to run the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">$ helm upgrade --values traefik-values.yaml traefik traefik/traefik -n kube-system
</code></pre></div><p>Contents of the <code>traefik-values.yaml</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">ports</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">traefik</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9000</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">exposedPort</span><span class="p">:</span><span class="w"> </span><span class="m">9000</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8000</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">exposedPort</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">  </span><span class="nt">minecraft</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">22565</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">exposedPort</span><span class="p">:</span><span class="w"> </span><span class="m">25565</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">  </span><span class="nt">websecure</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8443</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">exposedPort</span><span class="p">:</span><span class="w"> </span><span class="m">443</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">    </span><span class="nt">http3</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span><span class="w">      </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span><span class="w">      </span><span class="nt">domains</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="w">    </span><span class="nt">middlewares</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="w">  </span><span class="nt">metrics</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9100</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">exposedPort</span><span class="p">:</span><span class="w"> </span><span class="m">9100</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></code></pre></div><p>After that, connections to <code>LoadBalancer</code> will be allowed on port <code>25565</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">$ kubectl get svc -n kube-system <span class="p">|</span> grep -v <span class="s2">&#34;none&#34;</span>
NAME                 TYPE           CLUSTER-IP      EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>                                      AGE
traefik              LoadBalancer   10.43.2.50      100.10.0.11   25565:30224/TCP,80:31380/TCP,443:30226/TCP   2d21h
</code></pre></div><h3 id="deploy">Deploy<a hidden class="anchor" aria-hidden="true" href="#deploy">#</a></h3>
<p>Example of the final manifest that contains the required configuration:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Namespace</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Secret</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">Opaque</span><span class="w">
</span><span class="w"></span><span class="nt">data</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">SSH_KEY_PUBLIC</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">SSH_KEY_PRIVATE</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">MYSQL_DBS</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">MYSQL_HOST</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">S3_BUCKET</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">S3_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">S3_ACCESS_KEY_ID</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;SECRET&#34;</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">apps/v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">Recreate</span><span class="w">
</span><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github-registry</span><span class="w">
</span><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">ghcr.io/oldtyt/docker_minecraft</span><span class="w">
</span><span class="w">        </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l">Always</span><span class="w">
</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="nt">requests</span><span class="p">:</span><span class="w">
</span><span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l">1000m</span><span class="w">
</span><span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l">5G</span><span class="w">
</span><span class="w">          </span><span class="nt">limits</span><span class="p">:</span><span class="w">
</span><span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l">6G</span><span class="w">
</span><span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l">1200m</span><span class="w">
</span><span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">XMX</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;5G&#34;</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XMS&#34;</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;512M&#34;</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_HOST</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_HOST</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_USER</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_USER</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_DB</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_USER</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_PASSWORD</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">MYSQL_PASSWORD</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">S3_BUCKET</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">S3_BUCKET</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">S3_ACCESS_KEY</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">S3_ACCESS_KEY</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">S3_ACCESS_KEY_ID</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">S3_ACCESS_KEY_ID</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">SSH_KEY_PRIVATE</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">SSH_KEY_PRIVATE</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">SSH_KEY_PUBLIC</span><span class="w">
</span><span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span><span class="w">              </span><span class="nt">secretKeyRef</span><span class="p">:</span><span class="w">
</span><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft-secret</span><span class="w">
</span><span class="w">                </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">SSH_KEY_PUBLIC</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">PLUGINS_LIST</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;some,plugins,list&#34;</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">GIT_REPO</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;git@github.com:USER/REPO.git&#34;</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">KERNEL</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;KERNEL&#34;</span><span class="w">
</span><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;WORLDS&#34;</span><span class="w">
</span><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;some_worlds_name&#34;</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Service</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l">prod</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span><span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l">OldTyT</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">minecraft</span><span class="w">
</span><span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">25565</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">25565</span><span class="w">
</span><span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">some_worlds_name</span><span class="w">
</span></code></pre></div><p>The command to deploy the manifest:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">$ kubectl apply -f minecraft.yaml
</code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://oldtyt.xyz/tags/kubernetes/">kubernetes</a></li>
      <li><a href="https://oldtyt.xyz/tags/minecraft/">minecraft</a></li>
      <li><a href="https://oldtyt.xyz/tags/skills/">skills</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://oldtyt.xyz/posts/first/">
    <span class="title">Next »</span>
    <br>
    <span>First post</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on twitter"
        href="https://twitter.com/intent/tweet/?text=How%20I%20launched%20minecraft%20in%20kubernetes&amp;url=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f&amp;hashtags=kubernetes%2cminecraft%2cskills">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f&amp;title=How%20I%20launched%20minecraft%20in%20kubernetes&amp;summary=How%20I%20launched%20minecraft%20in%20kubernetes&amp;source=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f&title=How%20I%20launched%20minecraft%20in%20kubernetes">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on whatsapp"
        href="https://api.whatsapp.com/send?text=How%20I%20launched%20minecraft%20in%20kubernetes%20-%20https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How I launched minecraft in kubernetes on telegram"
        href="https://telegram.me/share/url?text=How%20I%20launched%20minecraft%20in%20kubernetes&amp;url=https%3a%2f%2foldtyt.xyz%2fposts%2fminecraft_in_kubernetes%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://oldtyt.xyz/">OldTyT</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
